{"version":3,"sources":["images/bg2.png","images/qr-background.png","images/BCS_YEP_QR.png","components/Layout.js","constant.js","db/firebaseConfig.js","db/actions.js","storage-actions/index.js","components/Loading.js","components/FormPage.js","components/HomePage.js","components/QRCodePage.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","_ref","children","React","createElement","className","src","BG","alt","IMAGE_NAMES","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","addData","getAuth","async","runTransaction","usersCollection","collection","querySnapshot","getDocs","isNameExist","usedGiftImages","forEach","doc","user","data","name","imageId","push","Error","availableGiftImages","filter","includes","length","Math","floor","random","getRandomGiftId","newUser","userRef","transaction","set","console","log","e","message","isDuplicatedName","updateData","previousName","userDocToUpdate","ref","concat","update","getLocalName","isExpired","hasExpired","expiryTimeStr","localStorage","getItem","expiryTime","parseInt","Date","getTime","undefined","setLocalName","setItem","setExpiryTime","currentTime","toString","Loading","role","aria-hidden","viewBox","fill","xmlns","d","sleep","Promise","resolve","setTimeout","FormPage","setName","useState","submittedName","setSubmittedName","isLoading","setIsLoading","error","setError","history","useHistory","Layout","htmlFor","type","id","placeholder","value","onChange","persist","target","style","width","onClick","result","disabled","Gifts","gifts","setGifts","map","image","image_url","useEffect","unsubscribe","onAddUser","onSnapshot","empty","users","docs","getData","newGifts","gift","newGift","_objectSpread","matchedImage","find","key","HomePage","QRCodePage","QRCodeBG","QRCode","top","left","transform","App","Router","Switch","Route","path","exact","component","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.ad7e9d9f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg2.79e00129.png\";","module.exports = __webpack_public_path__ + \"static/media/qr-background.49380de0.png\";","module.exports = __webpack_public_path__ + \"static/media/BCS_YEP_QR.7aa28984.png\";","import React from \"react\";\r\nimport BG from \"../images/bg2.png\";\r\n\r\nexport default ({ children }) => (\r\n  <div className=\"relative flex\">\r\n    <img\r\n      src={BG}\r\n      alt=\"qr-page-background\"\r\n      className=\"w-screen h-screen object-cover object-top\"\r\n    />\r\n    {children}\r\n  </div>\r\n);\r\n","export const IMAGE_NAMES = [\r\n  \"1\",\r\n  \"2\",\r\n  \"3\",\r\n  \"4\",\r\n  \"5\",\r\n  \"6\",\r\n  \"7\",\r\n  \"8\",\r\n  \"9\",\r\n  \"10\",\r\n  \"11\",\r\n  \"12\",\r\n  \"13\",\r\n  \"14\",\r\n  \"15\",\r\n  \"16\",\r\n  \"17\",\r\n  \"18\",\r\n  \"19\",\r\n  \"20\",\r\n  \"21\",\r\n  \"22\",\r\n  \"23\",\r\n  \"24\",\r\n  \"25\",\r\n  \"26\",\r\n  \"27\",\r\n  \"28\",\r\n  \"29\",\r\n  \"30\",\r\n  \"31\",\r\n  \"32\",\r\n  \"33\",\r\n  \"34\",\r\n  \"35\",\r\n  \"36\",\r\n  \"37\",\r\n  \"38\",\r\n  \"39\",\r\n  \"40\",\r\n];\r\n","// Import Firebase SDK\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB-o054YZC7nPc66uSsgBbQx84LPC3xU2k\",\r\n  authDomain: \"bcs-yep.firebaseapp.com\",\r\n  databaseURL: \"https://bcs-yep-default-rtdb.firebaseio.com\",\r\n  projectId: \"bcs-yep\",\r\n  storageBucket: \"bcs-yep.firebasestorage.app\",\r\n  messagingSenderId: \"829930064748\",\r\n  appId: \"1:829930064748:web:0385ab1f3afd1cfe314149\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app); // Firestore\r\nconst auth = getAuth(app); // Authentication\r\n\r\nexport { db, auth };\r\n","import {\r\n  collection,\r\n  runTransaction,\r\n  doc,\r\n  getDocs,\r\n  onSnapshot,\r\n} from \"firebase/firestore\";\r\nimport { IMAGE_NAMES } from \"../constant\";\r\nimport { db } from \"./firebaseConfig\";\r\n\r\nconst getData = (onAddUser) => {\r\n  const usersCollection = collection(db, \"users\");\r\n\r\n  // Đăng ký listener để theo dõi thay đổi dữ liệu\r\n  const unsubscribe = onSnapshot(usersCollection, (querySnapshot) => {\r\n    console.log(\"Listener: Add an user!!!\");\r\n    if (querySnapshot.empty) {\r\n      onAddUser([]);\r\n      return;\r\n    }\r\n\r\n    const users = querySnapshot.docs.map((doc) => doc.data());\r\n    onAddUser(users);\r\n  });\r\n\r\n  // Trả về hàm `unsubscribe` để ngắt kết nối khi không cần thiết\r\n  return unsubscribe;\r\n};\r\n\r\n// Hàm random imageId chưa được sử dụng\r\nconst getRandomGiftId = async (usedGiftImages) => {\r\n  const availableGiftImages = IMAGE_NAMES.filter(\r\n    (name) => !usedGiftImages.includes(name)\r\n  );\r\n\r\n  // Random imageId từ danh sách chưa được sử dụng\r\n  if (availableGiftImages.length === 0) return null;\r\n  const randomIndex = Math.floor(Math.random() * availableGiftImages.length);\r\n  return availableGiftImages[randomIndex];\r\n};\r\n\r\nconst addData = async (name) => {\r\n  try {\r\n    // Bước 1: Sử dụng runTransaction để đảm bảo thao tác nguyên tử (atomic)\r\n    await runTransaction(db, async (transaction) => {\r\n      // console.log(\"waiting for 5 second\");\r\n      // await new Promise((resolve) => {\r\n      //   setTimeout(resolve, 5000);\r\n      // });\r\n\r\n      // console.log(\"after waiting\");\r\n\r\n      // Bước 2: Kiểm tra nếu name đã tồn tại\r\n      const usersCollection = collection(db, \"users\");\r\n      const querySnapshot = await getDocs(usersCollection);\r\n\r\n      let isNameExist = false;\r\n      const usedGiftImages = [];\r\n\r\n      querySnapshot.forEach((doc) => {\r\n        const user = doc.data();\r\n\r\n        if (user.name === name) {\r\n          isNameExist = true;\r\n        }\r\n        if (user.imageId) {\r\n          usedGiftImages.push(user.imageId);\r\n        }\r\n      });\r\n\r\n      if (isNameExist) {\r\n        throw new Error(`Duplicate user.`);\r\n      }\r\n\r\n      // Bước 3: Lấy một imageId chưa được sử dụng\r\n      const imageId = await getRandomGiftId(usedGiftImages);\r\n\r\n      if (!imageId) {\r\n        throw new Error(\"No available imageId.\");\r\n      }\r\n\r\n      // Tạo tài liệu người dùng mới\r\n      const newUser = { name, imageId };\r\n\r\n      // Bước 4: Kiểm tra và thêm người dùng vào Firestore\r\n      const userRef = doc(collection(db, \"users\"));\r\n      transaction.set(userRef, newUser);\r\n    });\r\n\r\n    console.log(\"User added successfully\");\r\n  } catch (e) {\r\n    if (e.message === \"Duplicate user.\") {\r\n      return {\r\n        isDuplicatedName: true,\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nconst updateData = async (previousName, name) => {\r\n  try {\r\n    // Bước 1: Sử dụng runTransaction để đảm bảo thao tác nguyên tử (atomic)\r\n    await runTransaction(db, async (transaction) => {\r\n      // Bước 2: Kiểm tra nếu name đã tồn tại\r\n      const usersCollection = collection(db, \"users\");\r\n\r\n      let isNameExist = false;\r\n      let userDocToUpdate = null;\r\n\r\n      const querySnapshot = await getDocs(usersCollection);\r\n      querySnapshot.forEach((doc) => {\r\n        const user = doc.data();\r\n        if (user.name === name) {\r\n          isNameExist = true;\r\n        }\r\n        if (user.name === previousName) {\r\n          userDocToUpdate = doc.ref; // Lưu lại tham chiếu đến document cần cập nhật\r\n        }\r\n      });\r\n      if (isNameExist) {\r\n        throw new Error(`Duplicate user.`);\r\n      }\r\n      if (!userDocToUpdate) {\r\n        throw new Error(`User with previousName \"${previousName}\" not found.`);\r\n      }\r\n\r\n      // Bước 3: Cập nhật tên của người dùng\r\n      transaction.update(userDocToUpdate, { name });\r\n    });\r\n\r\n    console.log(\"User updated successfully\");\r\n  } catch (e) {\r\n    if (e.message === \"Duplicate user.\") {\r\n      return {\r\n        isDuplicatedName: true,\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport { getData, addData, updateData };\r\n","const STORAGE_KEY = \"bcs-yep-name\";\r\nconst STORAGE_EXP = \"bcs-yep-enrol-exp\";\r\n\r\nconst setExpiryTime = () => {\r\n  const currentTime = new Date().getTime(); // Lấy thời gian hiện tại (tính bằng ms)\r\n  localStorage.setItem(STORAGE_EXP, currentTime.toString()); // Lưu vào localStorage\r\n};\r\nconst hasExpired = () => {\r\n  const expiryTimeStr = localStorage.getItem(STORAGE_EXP);\r\n  if (!expiryTimeStr) return true; // Không có giá trị trong localStorage => Hết hạn\r\n\r\n  const expiryTime = parseInt(expiryTimeStr, 10); // Chuyển đổi về số\r\n  const currentTime = new Date().getTime(); // Lấy thời gian hiện tại\r\n  const halfHourInMs = 30 * 60 * 1000; // 30 phút tính bằng ms\r\n\r\n  return currentTime - expiryTime > halfHourInMs; // Kiểm tra thời gian chênh lệch\r\n};\r\n\r\nexport const getLocalName = () => {\r\n  const isExpired = hasExpired();\r\n  const name = localStorage.getItem(STORAGE_KEY);\r\n  return !isExpired && name ? name : undefined;\r\n};\r\nexport const setLocalName = (name) => {\r\n  localStorage.setItem(STORAGE_KEY, name);\r\n  setExpiryTime();\r\n};\r\n","import React from \"react\";\r\n\r\nexport default () => (\r\n  <div role=\"status\" className=\"pb-2\">\r\n    <svg\r\n      aria-hidden=\"true\"\r\n      className=\"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600\"\r\n      viewBox=\"0 0 100 101\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n      <path\r\n        d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\"\r\n        fill=\"currentFill\"\r\n      />\r\n    </svg>\r\n    <span className=\"sr-only\">Loading...</span>\r\n  </div>\r\n);\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Layout from \"./Layout\";\r\nimport { addData, updateData } from \"../db/actions\";\r\nimport { getLocalName, setLocalName } from \"../storage-actions\";\r\nimport Loading from \"./Loading\";\r\n\r\nconst sleep = async () => new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\nexport default function FormPage() {\r\n  const [name, setName] = useState(\"\");\r\n  const [submittedName, setSubmittedName] = useState(() => getLocalName());\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"w-5/6 absolute top-[230px] md:top-[250px] lg:top-[300px] bottom-0 left-1/2 pt-10 translate-x-[-50%] flex flex-col text-white pacifico-regular tracking-[2px]\">\r\n        {submittedName && (\r\n          <i className=\"mb-5\">\r\n            Bạn đã đăng ký thành công dưới tên&nbsp;\r\n            <span className=\"text-yellow-400 text-xl\">{submittedName}</span> !!!\r\n          </i>\r\n        )}\r\n        <label htmlFor=\"name\" className=\"block mb-2 text-sm font-medium mb-2\">\r\n          Tên\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"name\"\r\n          className=\"shadow appearance-none border rounded w-full py-1 px-3 text-black leading-loose focus:outline-none focus:shadow-outline mb-4 max-w-[470px]\"\r\n          placeholder=\"Vui lòng nhập tên của bạn...\"\r\n          value={name}\r\n          onChange={(e) => {\r\n            e.persist();\r\n            setError(\"\");\r\n            setName(e.target.value);\r\n          }}\r\n        />\r\n        {isLoading && <Loading />}\r\n        {error && <span className=\"mb-4 text-orange-400\">{error}</span>}\r\n        {!submittedName && (\r\n          <button\r\n            className={`bg-[#FFC107] ${\r\n              isLoading ? \"bg-[#ccc]\" : \"\"\r\n            } hover:bg-[#FFA500] text-black font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-2`}\r\n            style={{ width: \"fit-content\" }}\r\n            onClick={async () => {\r\n              if (!name) return;\r\n              setIsLoading(true);\r\n              const result = await addData(name);\r\n              const isDuplicatedName = result?.isDuplicatedName;\r\n              await sleep();\r\n              if (isDuplicatedName) {\r\n                setError(\r\n                  `Đã có người đăng ký dưới tên '${name}'. Vui lòng sử dụng tên khác.`\r\n                );\r\n              } else {\r\n                setLocalName(name);\r\n                setSubmittedName(name);\r\n              }\r\n              setIsLoading(false);\r\n            }}\r\n            disabled={isLoading}\r\n          >\r\n            Ghi danh\r\n          </button>\r\n        )}\r\n\r\n        {submittedName && (\r\n          <div className=\"mt-2\">\r\n            <button\r\n              className={`bg-[#FFC107] ${\r\n                isLoading ? \"bg-[#ccc]\" : \"\"\r\n              } hover:bg-[#FFA500] text-black font-bold py-2 px-4 rounded`}\r\n              style={{ width: \"fit-content\" }}\r\n              onClick={async () => {\r\n                if (name === submittedName) return;\r\n                setIsLoading(true);\r\n                const result = await updateData(submittedName, name);\r\n                const isDuplicatedName = result?.isDuplicatedName;\r\n                await sleep();\r\n                if (isDuplicatedName) {\r\n                  setError(\r\n                    `Đã có người đăng ký dưới tên '${name}'. Vui lòng sử dụng tên khác.`\r\n                  );\r\n                } else {\r\n                  setLocalName(name);\r\n                  setSubmittedName(name);\r\n                }\r\n                setIsLoading(false);\r\n              }}\r\n              disabled={isLoading}\r\n            >\r\n              Cập nhật\r\n            </button>\r\n            <button\r\n              className={`bg-[#FFC107] ${\r\n                isLoading ? \"bg-[#ccc]\" : \"\"\r\n              } hover:bg-[#FFA500] text-black font-bold py-2 px-4 rounded ml-4`}\r\n              style={{ width: \"fit-content\" }}\r\n              onClick={async () => {\r\n                history.push(\"/\");\r\n              }}\r\n              disabled={isLoading}\r\n            >\r\n              Xem phần quà\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { IMAGE_NAMES } from \"../constant\";\r\nimport { getData } from \"../db/actions\";\r\n\r\nconst Gifts = () => {\r\n  const [gifts, setGifts] = useState(() =>\r\n    IMAGE_NAMES.map((image) => ({\r\n      image_url: `/images/${image}.png`,\r\n      imageId: image,\r\n      name: \"?\",\r\n    }))\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleAddedUser = (users) => {\r\n      console.log(\"onchange here\");\r\n      const newGifts = gifts.map((gift) => {\r\n        const newGift = { ...gift };\r\n        const matchedImage = users.find(\r\n          (user) => user.imageId === gift.imageId\r\n        );\r\n        if (matchedImage) {\r\n          newGift.name = matchedImage.name;\r\n        }\r\n        return newGift;\r\n      });\r\n      setGifts(newGifts);\r\n    };\r\n\r\n    const unsubscribe = getData(handleAddedUser);\r\n\r\n    return () => unsubscribe();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-5/6 absolute top-[190px] sm:top-[220px] md:top-[250px] lg:top-[280px] xl:top-[45%] bottom-0 left-1/2 pt-2 pb-5 text-center translate-x-[-50%] grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 md:gap-7 overflow-y-scroll example shadow-lg\">\r\n      {gifts.map((gift) => (\r\n        <div\r\n          key={gift.image_url}\r\n          className=\"flex flex-col items-center justify-center\"\r\n        >\r\n          <img\r\n            src={gift.image_url}\r\n            alt=\"gift\"\r\n            className=\"image--main w-[90px] sm:w-[100px] md:w-[120px] lg:w-[135px]\"\r\n          />\r\n\r\n          <span className=\"pacifico-regular text-xl min-h-[36px] md:text-2xl text-yellow-400\">\r\n            {gift.name}\r\n          </span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function HomePage() {\r\n  return (\r\n    <Layout>\r\n      <Gifts />\r\n    </Layout>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport QRCodeBG from \"../images/qr-background.png\";\r\nimport QRCode from \"../images/BCS_YEP_QR.png\";\r\n\r\nconst QRCodePage = () => {\r\n  return (\r\n    <div className=\"relative min-w-screen min-h-screen\">\r\n      <img\r\n        src={QRCodeBG}\r\n        alt=\"qr-page-background\"\r\n        className=\"absolute w-screen h-screen object-cover\"\r\n      />\r\n      <img\r\n        src={QRCode}\r\n        className=\"absolute\"\r\n        style={{\r\n          width: \"35%\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n        alt=\"qr-code\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRCodePage;\r\n","import React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nimport FormPage from \"./components/FormPage\";\r\nimport HomePage from \"./components/HomePage\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport QRCodePage from \"./components/QRCodePage\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"min-h-screen\">\r\n        {/* <Header /> */}\r\n        <Switch>\r\n          <Route path=\"/\" exact component={HomePage} />\r\n          <Route path=\"/qr-code\" exact component={QRCodePage} />\r\n          <Route path=\"/form\" exact component={FormPage} />\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}